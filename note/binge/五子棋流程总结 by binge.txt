binge fivechess 项目总结 5.7

1，根据argv数组长度和内容判断命令行的参数书是否足够，足够则显示用户输入提示信息，否则异常终止程序
2，获取用户输入，显示初始化棋盘
3，根据用户输入判断启动主机程序还是客户机程序

主机端程序模块
1，创建socket
（1）根据命令行参数中的ip地址和端口号 作为bind_server_socket函数参数
（2）调用socket函数创建一个socket通讯结点
（3）构造网络地址结构体，并用bind函数为sock绑定网络地址
2，调用listen函数请求内核允许指定的socket接收接入呼叫，并指定接收队列大小
3，调用accept函数建立socket上的一个接入连接，返回一个文件描述符（用于读写操作）
4，进入接收发送消息循环，开始游戏
（1）提示用户输入游戏操作选项（赋值给自定义信息结构体的信息id)
（2）get_inputchess函数中让玩家输入要下棋子的位置，并赋值给全局变量x,y,以及棋盘数组的棋子信息，封装信息结构体
（3）win函数根据棋盘数组进行判断主机玩家是否胜利，胜利则返回棋子的信息并打印胜利信息
（4）调用send函数来向TCP连接的另一端发送数据（通过socket通信端点发送落子信息结构体）
（5）并更新当前玩家落子后的棋盘
（6）do while循环接收客户端的输入（recv接收socket通讯端点的信息，并复制到接收缓冲区），
        接收到信息后并正确解析信息结构体（decompre根据信息ID区分信息内容，并通过switch语句进行不同操作)后退出内层循环
（7）判断客户端是否胜利
（8）更新棋盘信息

客户端程序模块
1，创建客户端socket
（1）根据命令行参数中的ip地址和端口号 作为bind_server_socket函数参数
（2）调用socket函数创建一个socket通讯结点
（3）构造网络地址结构体，并用connect函数把socket通讯端点连接上网络地址结构体所指向的socket地址（服务器），成功则返回0
        连接成功后，客户端所申请的socket通讯端点的标识符id是一个合法的文件描述符，可以用于进行读写（与服务器socket通信），返回文件描述符
2，进入接收发送消息循环，开始游戏
（1）do while循环接收服务端的输入（recv接收socket通讯端点的信息，并复制到接收缓冲区），
        接收到信息后并正确解析信息结构体（decompre根据信息ID区分信息内容，并通过switch语句进行不同操作)后退出内层循环
（2）win函数根据棋盘数组进行判断主机玩家是否胜利，胜利则返回棋子的信息并打印胜利信息
（3）更新当前玩家落子后的棋盘
（4）提示用户选择消息类型，是继续落子还是退出
（5）如果继续输入则get_inputchess函数让用户输入落子信息，并封装信息结构体
（6）判断当前玩家落子后是否胜利
（7）向当前socket标识符（文件描述符）发送信息结构体（send函数实现）
（8）刷新落子后的棋盘






  
